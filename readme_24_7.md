# Непрерывная работа бота 24/7

## Особенности системы непрерывной работы

Для обеспечения работы бота 24/7 на платформе Replit была создана многоуровневая система мониторинга и автоматического восстановления, состоящая из следующих компонентов:

1. **Основной процесс бота**: Непосредственно обрабатывает сообщения пользователей через Telegram API
2. **Web-приложение**: Предоставляет интерфейс для мониторинга состояния бота
3. **Система мониторинга**: Отслеживает состояние бота и выполняет перезапуск при необходимости
4. **Система автовосстановления**: Обеспечивает автоматический перезапуск всей инфраструктуры бота

### Ключевые компоненты

| Компонент | Файл | Назначение |
|-----------|------|------------|
| Основной скрипт запуска | `start_24_7.sh` | Запускает всю инфраструктуру мониторинга и восстановления |
| Скрипт непрерывной работы | `run_24_7.sh` | Управляет запуском компонентов с автоперезапуском |
| Система восстановления | `auto_recovery.py` | Отслеживает работу всех компонентов и перезапускает их при сбоях |
| Монитор бота | `bot_monitor.py` | Контролирует состояние бота и перезапускает его |

## Быстрый старт

Для запуска бота в режиме 24/7:

1. Убедитесь, что у вас включена опция Reserved VM в настройках Replit
2. Выполните команду для запуска системы:

```bash
bash start_24_7.sh
```

3. Проверьте состояние бота через веб-интерфейс или командой:

```bash
ps aux | grep python
```

## Подробная документация

Для получения подробной информации о работе системы 24/7 и устранении возможных неполадок, ознакомьтесь с полной документацией:

- [Руководство по обеспечению работы 24/7](docs/24-7-operation.md)

## Вопросы и ответы

**В: Работает ли система на бесплатных аккаунтах Replit?**

О: Для надежной работы 24/7 требуется Reserved VM (платная опция). На бесплатных аккаунтах система будет пытаться предотвратить "засыпание", но не может гарантировать непрерывную работу.

**В: Что делать, если бот перестал отвечать?**

О: Проверьте логи в директории `logs/`, перезапустите систему командой `bash start_24_7.sh` и проверьте соединение с Telegram API.

**В: Как изменить настройки мониторинга?**

О: Параметры мониторинга можно настроить в файлах `auto_recovery.py` и `bot_monitor.py`, изменив константы в начале файлов.