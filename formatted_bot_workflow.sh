#!/bin/bash

# Скрипт для запуска бота с новым форматированием тренировок в режиме workflow
# Останавливает все существующие процессы бота и запускает новый экземпляр

# Останавливаем все существующие процессы Python
echo "Останавливаем существующие процессы бота..."
pkill -f "python.*bot"
sleep 2

# Подготавливаем окружение
echo "Подготавливаем окружение..."
mkdir -p logs
touch bot_health.txt

# Сбрасываем Telegram сессию
echo "Сбрасываем Telegram сессию..."
python clean_telegram_api.py --reset_only

# Запускаем бота с обновленным форматированием
echo "Запускаем бота с обновленным форматированием тренировок..."
exec python run_formatted_bot.py